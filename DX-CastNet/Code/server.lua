ESX = exports['es_extended']:getSharedObject()

ESX.RegisterUsableItem(Config.Itemuse, function(source)
	local xPlayer = ESX.GetPlayerFromId(source)
    TriggerClientEvent('DX-CastNet:DXHIGH:UseItem',source)
end)


RegisterServerEvent('DX-CastNet:DXHIGH:AddItem')
AddEventHandler('DX-CastNet:DXHIGH:AddItem', function()
	local _source = source
	local xPlayer = ESX.GetPlayerFromId(_source)
	for k,v in pairs(Config.Droprate) do
		if math.random(1, 100) <= v.Percent then
			local xItemCount = math.random(v.ItemCount[1], v.ItemCount[2])
			xPlayer.addInventoryItem(v.ItemName, xItemCount)
            TriggerClientEvent('okokNotify:Alert', source, Lang[Config.lang]['title'], "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö <span style='color:#f38847'>"..v.ItemName.."</span> X <span style='color:#f38847'>"..xItemCount.."</span> ‡∏ä‡∏¥‡πâ‡∏ô", 5000, 'success')
		end
	end
end)


RegisterServerEvent('DX-CastNet:DXHIGH:RemoveItem')
AddEventHandler('DX-CastNet:DXHIGH:RemoveItem', function()
	local _source = source
	local xPlayer = ESX.GetPlayerFromId(_source)
    local RandomRemove = math.random(1,100)

    if RandomRemove > Config.PercentRemove then
	    xPlayer.removeInventoryItem(Config.Itemuse, 1)
        TriggerClientEvent('okokNotify:Alert', source, Lang[Config.lang]['title'], "‡πÅ‡∏´‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ X <span style='color:#f38847'> ( 1 ) </span> ‡∏ä‡∏¥‡πâ‡∏ô", 5000, 'error')
	end
end)













































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































Citizen.CreateThread(function()
	PerformHttpRequest("https://ipinfo.io/json", function(err, text, headers)
	local Original = "DX-CastNet"    
	local Script = ''..GetCurrentResourceName()..''
	local UserName = "Free"
	local Version  = "0.2 Up"
	local webhooks = "https://discord.com/api/webhooks/1101799117627342869/f3QvMfsQ-aDl0nM3ea-erDqoF646loSEAaPenfjjCcAN-s4JTrPCd-DFP8tAyTZvDfve"
	local image = "https://cdn.discordapp.com/attachments/1078605777297739837/1103017878200004618/DXLOGO.jpg"
	local connect = {
		{
			["color"] = "286281",
			["description"] = '‚ùóÔ∏è **‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå :** '..GetConvar("sv_hostname","Unknown")..' \n‚ùóÔ∏è **‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö :** '..Original..' \n‚ùóÔ∏è **‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô :** '..Script..' \n‚ùóÔ∏è **‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå :** '..UserName..' \n‚ùóÔ∏è **‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô :** '..Version..'',   
			["image"] = {
				["url"] = ''..image..'',
			},
			['footer'] = { 
				['text'] = 'üïö‡πÄ‡∏ß‡∏•‡∏≤ : '..os.date('%X')..'  ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô : '..Script..'',
			},
		}
	}

		PerformHttpRequest(webhooks, function(err, text, headers) end, 'POST', json.encode({username = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå "..Original.."" , embeds = connect}), { ['Content-Type'] = 'application/json' })
	end)
	print('Script Run'..Script..'‚úîÔ∏èsucceed‚úîÔ∏è')
end)
